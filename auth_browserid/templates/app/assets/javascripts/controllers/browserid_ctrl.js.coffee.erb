angular.module("<%= @AppName %>").controller "BrowseridCtrl", ($scope, $http) ->
  $scope.myData = {};
  $scope.myData.doClick = (item, event) ->
    event.preventDefault();
    if (item == 'signout')
      responsePromise = $http.delete('/users/sign_out')
      responsePromise.success (data, status, headers, config) ->
        window.location.href = '/'
      responsePromise.error (data, status, headers, config) ->
        window.location.href = '/'
    else
      navigator.id.get (assertion) ->
        if (assertion)
          responsePromise = $http.post("/users/sign_in", {"assertion": assertion}, {cache: false});
          responsePromise.success (data, status, headers, config) ->
            window.location.href = '/'
          responsePromise.error (data, status, headers, config) ->
            alert("AJAX failed!")