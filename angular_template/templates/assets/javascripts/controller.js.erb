/**
 * Contr√¥leur dans le module <%= class_name %>sModuleControllers
 */

// Index
<%= class_name.pluralize.camelize(:lower) %>ModuleControllers.controller('<%= class_name.camelize(:upper).pluralize %>IndexController', ['$scope', '$http',
  function($scope, $http){
    // Liste des <%= class_name.pluralize %>
    $http.get('<%= class_name.pluralize %>/list.json').success(function(data) {
      $scope.<%= class_name.pluralize %> = data;
    });

    $scope.<%= class_name %>Order = "";
    $scope.<%= class_name %>Query = "";
  }
]);

// Show
<%= class_name.pluralize.camelize(:lower) %>ModuleControllers.controller('<%= class_name.camelize(:upper).pluralize %>ShowController', ['$scope', '$routeParams', '$http',
  function($scope, $routeParams, $http){
    $http.get('<%= class_name.pluralize %>/' + $routeParams.<%= class_name %>Id + '.json').success(function(data) {
      $scope.<%= class_name %> = data;
    });
  }
]);


// Edit
<%= class_name.pluralize.camelize(:lower) %>ModuleControllers.controller('<%= class_name.camelize(:upper).pluralize %>EditController', ['$scope', '$routeParams', '$http',
  function($scope, $routeParams, $http){
    $http.get('<%= class_name.pluralize %>/' + $routeParams.<%= class_name %>Id + '.json').success(function(data) {
      $scope.<%= class_name %> = data;
    });

  // Enregistre le formulaire
    $scope.submit = function() {
      if($scope.<%= class_name %>.name){
        $http({method: 'POST', url: '/<%= class_name.pluralize %>/edit', data: $scope.result}).
          success(function(data, status, headers, config) {
            alert('success');
          }).
          error(function(data, status, headers, config) {
            alert('error');
          });
      }
    };
  }
]);
