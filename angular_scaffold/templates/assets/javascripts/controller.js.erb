/**
 * Contr√¥leur dans le module <%= class_name %>sModuleControllers
 */

// Index
angular.module("<%= @AppName %>").controller('<%= class_name.camelize(:upper).pluralize %>IndexCtrl', ['$scope', '$http',
  function($scope, $http){
    // Liste des <%= class_name.pluralize %>
    $http.get('api/v1/<%= class_name.tableize %>/').success(function(data) {
      $scope.<%= class_name.pluralize %> = data;
    });

    $scope.<%= class_name %>Order = "";
    $scope.<%= class_name %>Query = "";
  }
]);

// Show
angular.module("<%= @AppName %>").controller('<%= class_name.camelize(:upper).pluralize %>ShowCtrl', ['$scope', '$routeParams', '$http',
  function($scope, $routeParams, $http){
    $http.get('api/v1/<%= class_name.tableize %>/' + $routeParams.<%= class_name %>Id).success(function(data) {
      $scope.<%= class_name %> = data;
    });
  }
]);

// New
angular.module("<%= @AppName %>").controller('<%= class_name.camelize(:upper).pluralize %>NewCtrl', ['$scope', '$routeParams', '$http',
  function($scope, $routeParams, $http){
    $http.get('api/v1/<%= class_name.tableize %>/new').success(function(data) {
      $scope.<%= class_name %> = data;
    });

  // Create
    $scope.submit = function() {
      if($scope.<%= class_name %>.name){
        $http({method: 'POST', url: 'admin/<%= class_name.tableize %>', data: $scope.result}).
          success(function(data, status, headers, config) {
            alert('success');
          }).
          error(function(data, status, headers, config) {
            alert('error');
          });
      }
    };
  }
]);

// Edit
angular.module("<%= @AppName %>").controller('<%= class_name.camelize(:upper).pluralize %>EditCtrl', ['$scope', '$routeParams', '$http',
  function($scope, $routeParams, $http){
    $http.get('api/v1/<%= class_name.tableize %>/' + $routeParams.<%= class_name %>Id).success(function(data) {
      $scope.<%= class_name %> = data;
    });

  // PATCH/PUT Update
    $scope.submit = function() {
      if($scope.<%= class_name %>.name){
        $http({method: 'PUT', url: 'admin/<%= class_name.tableize %>/' + $routeParams.<%= class_name %>Id, data: $scope.result}).
          success(function(data, status, headers, config) {
            alert('success');
          }).
          error(function(data, status, headers, config) {
            alert('error');
          });
      }
    };
  }
]);

// Destroy
angular.module("<%= @AppName %>").controller('<%= class_name.camelize(:upper).pluralize %>DestroyCtrl', ['$scope', '$routeParams', '$http',
  function($scope, $routeParams, $http){
    $http.get('api/v1/<%= class_name.tableize %>/' + $routeParams.<%= class_name %>Id+"/edit").success(function(data) {
      $scope.<%= class_name %> = data;
    });

  // DELETE Delete
    $scope.submit = function() {
      if($scope.<%= class_name %>.name){
        $http({method: 'DELETE', url: 'admin/<%= class_name.tableize %>/destroy?id=' + $routeParams.<%= class_name %>Id, data: $scope.result}).
          success(function(data, status, headers, config) {
            alert('success');
          }).
          error(function(data, status, headers, config) {
            alert('error');
          });
      }
    };
  }
]);
